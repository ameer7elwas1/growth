# نظام النسخ الاحتياطي التلقائي
# Auto Backup System

## نظرة عامة
هذا النظام يوفر نسخ احتياطية تلقائية لمشروع HTML الخاص بك مع إدارة ذكية للنسخ القديمة.

## الملفات المتضمنة

### 1. `auto_backup.ps1` - السكريبت الرئيسي
سكريبت PowerShell متقدم يوفر:
- نسخ احتياطية مضغوطة أو غير مضغوطة
- إدارة تلقائية للنسخ القديمة
- سجلات مفصلة للعمليات
- رسائل ملونة للحالة

**الاستخدام:**
```powershell
# نسخ احتياطي بسيط
.\auto_backup.ps1

# نسخ احتياطي مضغوط مع عدد محدد من النسخ
.\auto_backup.ps1 -Compress -MaxBackups 5

# نسخ احتياطي مع مسار مخصص
.\auto_backup.ps1 -SourcePath "مسار\الملف.html" -BackupFolder "مسار\النسخ"
```

### 2. `quick_backup.bat` - النسخ السريع
ملف batch للنسخ الاحتياطي السريع:
- سهل الاستخدام
- لا يحتاج PowerShell
- يعمل بنقرة مزدوجة

**الاستخدام:**
- انقر نقرة مزدوجة على الملف
- أو شغله من سطر الأوامر

### 3. `setup_scheduled_backup.ps1` - إعداد المهام المجدولة
سكريبت لإعداد النسخ الاحتياطي التلقائي:

**الاستخدام:**
```powershell
# إعداد نسخ احتياطي يومي في الساعة 9 صباحاً
.\setup_scheduled_backup.ps1 -Interval Daily -StartHour 9

# إعداد نسخ احتياطي كل ساعة
.\setup_scheduled_backup.ps1 -Interval Hourly

# إعداد نسخ احتياطي أسبوعي
.\setup_scheduled_backup.ps1 -Interval Weekly -StartHour 10

# حذف المهمة المجدولة
.\setup_scheduled_backup.ps1 -RemoveTask
```

## إعدادات النظام

### مجلد النسخ الاحتياطية
```
d:\Projects\HTML\growth\backups\
├── agents_growth_iraqcell_backup_2025-01-07_16-06-30.html
├── agents_growth_iraqcell_backup_2025-01-07_17-06-30.html
├── backup_log.txt
└── ...
```

### تسمية الملفات
- **التنسيق:** `agents_growth_iraqcell_backup_YYYY-MM-DD_HH-mm-ss.html`
- **مثال:** `agents_growth_iraqcell_backup_2025-01-07_16-06-30.html`

### إدارة النسخ القديمة
- **الافتراضي:** الاحتفاظ بـ 10 نسخ احتياطية
- **قابل للتخصيص:** يمكن تغيير العدد حسب الحاجة
- **التنظيف التلقائي:** حذف النسخ الأقدم عند تجاوز الحد

## الميزات المتقدمة

### 1. النسخ المضغوطة
```powershell
.\auto_backup.ps1 -Compress
```
- توفير مساحة التخزين
- ملفات ZIP منظمة

### 2. السجلات المفصلة
- تتبع جميع عمليات النسخ الاحتياطي
- تسجيل الأخطاء والنجاحات
- ملف سجل في مجلد النسخ الاحتياطية

### 3. إحصائيات النسخ الاحتياطية
- عدد النسخ الاحتياطية
- الحجم الإجمالي
- أحدث نسخة احتياطية

## استكشاف الأخطاء

### مشاكل شائعة وحلولها

1. **خطأ في الصلاحيات**
   - شغل PowerShell كمدير
   - تحقق من صلاحيات الكتابة في المجلد

2. **الملف المصدر غير موجود**
   - تحقق من المسار الصحيح
   - تأكد من وجود الملف

3. **فشل في إنشاء المهمة المجدولة**
   - شغل السكريبت كمدير
   - تحقق من إعدادات Group Policy

### رسائل الخطأ الشائعة
- `الملف المصدر غير موجود` - تحقق من المسار
- `خطأ في إنشاء مجلد النسخ الاحتياطية` - تحقق من الصلاحيات
- `فشل في إنشاء النسخة الاحتياطية` - تحقق من مساحة التخزين

## التخصيص المتقدم

### تغيير المسارات
```powershell
# في auto_backup.ps1
$SourcePath = "مسار\الملف\الجديد.html"
$BackupFolder = "مسار\النسخ\الجديد"
```

### تغيير إعدادات النسخ الاحتياطي
```powershell
# عدد النسخ الاحتياطية
$MaxBackups = 20

# ضغط النسخ
$Compress = $true
```

### إضافة إشعارات
يمكن إضافة إشعارات Windows:
```powershell
# إضافة في نهاية السكريبت
[System.Windows.Forms.MessageBox]::Show("تم إكمال النسخ الاحتياطي", "إشعار")
```

## الدعم والمساعدة

### ملفات السجل
- `backup_log.txt` - سجل العمليات
- سجلات Windows Event Viewer للمهام المجدولة

### معلومات النظام
- Windows 10/11
- PowerShell 5.1 أو أحدث
- مساحة تخزين كافية للنسخ الاحتياطية

---

**ملاحظة:** تأكد من اختبار النظام قبل الاعتماد عليه في الإنتاج. يُنصح بإنشاء نسخة احتياطية يدوية أولاً للتأكد من صحة الإعدادات.
